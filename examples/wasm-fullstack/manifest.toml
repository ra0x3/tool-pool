[metadata]
name = "wasm-fullstack"
version = "0.1.0"
description = "Full-stack MCP server with PostgreSQL and OAuth support"
author = "MCP Kit Contributors"
license = "MIT"
created_at = "2025-01-20T00:00:00Z"

[server]
protocol_version = "1.0.0"
transport = "stdio"
capabilities = ["tools", "postgresql", "oauth"]

[[server.tools]]
name = "fetch_todos"
description = "Fetch todos from PostgreSQL or JSONPlaceholder API"
required_features = ["wasmedge-postgres"]

[[server.tools]]
name = "create_todo"
description = "Create todo in PostgreSQL"
required_features = ["wasmedge-postgres"]

[[server.tools]]
name = "update_todo"
description = "Update todo in PostgreSQL"
required_features = ["wasmedge-postgres"]

[[server.tools]]
name = "delete_todo"
description = "Delete todo from PostgreSQL"
required_features = ["wasmedge-postgres"]

[[server.tools]]
name = "search_todos"
description = "Search todos in PostgreSQL"
required_features = ["wasmedge-postgres"]

[[server.tools]]
name = "batch_process"
description = "Batch process todos in PostgreSQL"
required_features = ["wasmedge-postgres"]

[[server.tools]]
name = "db_stats"
description = "Get database statistics from PostgreSQL view"
required_features = ["wasmedge-postgres"]

[[server.tools]]
name = "read_wal"
description = "Read WAL entries from PostgreSQL"
required_features = ["wasmedge-postgres"]

[[server.tools]]
name = "test_connection"
description = "Test PostgreSQL database connection"
required_features = ["wasmedge-postgres"]

[[server.tools]]
name = "get_oauth_config"
description = "Get current OAuth configuration status"
required_features = []

[[server.tools]]
name = "generate_oauth_url"
description = "Generate OAuth authorization URL for user login"
required_features = []

[runtime]
target = "wasmedge"
wasi_version = "wasip1"
required_features = ["wasmedge_wasi_socket", "tokio_postgres"]

[[runtime.environment]]
name = "DATABASE_URL"
description = "PostgreSQL connection string"
required = false
default = "postgres://postgres:postgres@localhost/todo"

[[runtime.environment]]
name = "OAUTH_PROVIDER"
description = "OAuth provider (google, github, meta, microsoft)"
required = false

[[runtime.environment]]
name = "OAUTH_CLIENT_ID"
description = "OAuth client ID"
required = false

[[runtime.environment]]
name = "OAUTH_CLIENT_SECRET"
description = "OAuth client secret"
required = false

[bundle]
binary = "wasm-fullstack-stdio.wasm"
files = ["manifest.toml", "docker-compose.yml", "init.sql"]

[dependencies]
oauth_providers = ["google", "github", "meta", "microsoft"]

[[dependencies.services]]
name = "PostgreSQL"
type = "database"
version = "16+"
connection_template = "postgres://{user}:{password}@{host}/{database}"